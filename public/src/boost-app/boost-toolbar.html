<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/app-storage/app-network-status-behavior.html">

<link rel="import" href="../../bower_components/app-layout/app-layout.html">


<dom-module id="boost-toolbar">
  <template>
    <style>
      app-toolbar {
        @apply --layout-horizontal;
        @apply --layout-center;

        background-color: var(--paper-green-a700);
        color: var(--paper-green-50);
        padding: 6px 8px;
        --paper-icon-button-disabled: {
          color: var(--paper-purple-50);
        }
      }

      [main-title] {
        @apply --paper-font-headline;
        flex-grow: 1;
      }

      iron-icon {
        margin-right: 0.5em;
      }

      @media (min-width: 640px) {
        iron-icon,
        paper-icon-button {
          margin-right: 1.5em;
        }

        iron-icon:first-child {
          margin-left: 1em;
        }
      }

    </style>
    <app-toolbar>
      <iron-icon icon="av:library-music"></iron-icon>
      <div main-title>Playlist Boost</div>

      <iron-icon icon="[[_computeCloudIcon(online)]]"></iron-icon>
      <paper-icon-button icon="[[_computeLockIcon(signedIn)]]" disabled="[[!signedIn]]" on-tap="lock"></paper-icon-button>
    </app-toolbar>
  </template>
  <script>
    class BoostToolbar extends Polymer.mixinBehaviors([Polymer.AppNetworkStatusBehavior], Polymer.Element) {
      static get is() {
        return 'boost-toolbar';
      }

      static get properties() {
        return {
          signedIn: {
            type: Boolean,
            notify: true,
            value: false
          }
        };
      }

      _computeLockIcon(signedIn) {
        return signedIn ? 'lock-open' : 'lock';
      };

      _computeCloudIcon(online) {
        return online ? 'cloud' : 'cloud-off';
      }

      lock() {
        this.dispatchEvent(new CustomEvent('sign-out'));
      }
    }

    window.customElements.define(BoostToolbar.is, BoostToolbar);

  </script>
</dom-module>
